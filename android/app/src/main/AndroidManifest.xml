<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.smart_fitness_app">

    <!-- ðŸŒ Network + background -->
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.FOREGROUND_SERVICE" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <!-- ðŸƒ Required for step count & activity recognition -->
    <uses-permission android:name="android.permission.ACTIVITY_RECOGNITION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_BACKGROUND_LOCATION" />

    <!-- ðŸ“ Optional (only if you show workout distances / GPS routes) -->
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <!-- ðŸ©º Health Connect permissions for the data youâ€™ll read/write -->
    <uses-permission android:name="android.permission.health.READ_STEPS" />
    <uses-permission android:name="android.permission.health.WRITE_STEPS" />
    <uses-permission android:name="android.permission.health.READ_HEART_RATE" />
    <uses-permission android:name="android.permission.health.WRITE_HEART_RATE" />
    <uses-permission android:name="android.permission.READ_ACTIVE_ENERGY_BURNED" />
    <uses-permission android:name="android.permission.health.READ_HEALTH_DATA_HISTORY" />
    <uses-permission android:name="android.permission.health.READ_HEALTH_DATA_IN_BACKGROUND"/>


    <application
        android:name="${applicationName}"
        android:label="Smart Fitness App"
        android:icon="@mipmap/ic_launcher">
        <!-- ðŸ§© Main Flutter Activity -->
        <meta-data android:name="com.google.android.geo.API_KEY"
            android:value="AIzaSyAXfKpG8TAL8HaVG3eMoMfKeNcekmmevWA"/>
                <!-- Google Places API Key -->
                <!--
                    NOTE: Google Places API is now called through our backend server.
                    The API key is stored securely on the backend and never exposed to the client.

                    If you need Google Maps SDK features (not just Places API), uncomment below
                    and configure the key in android/local.properties or as an environment variable.

                    IMPORTANT: If you enable this, restrict the API key in Google Cloud Console:
                    1. Go to Google Cloud Console > APIs & Services > Credentials
                    2. Select your API key
                    3. Under "Application restrictions":
                       - Add Android app: Package name + SHA-1 fingerprint
                    4. Under "API restrictions": Restrict to only needed APIs
                -->
                <!--
                <meta-data
                    android:name="com.google.android.geo.API_KEY"
                    android:value="${googlePlacesApiKey}"/>
                -->
        <activity
            android:name=".MainActivity"
            android:exported="true">

            <!-- Intention to show Health Connect permission screen -->
            <intent-filter>
                <action android:name="androidx.health.ACTION_SHOW_PERMISSIONS_RATIONALE" />
            </intent-filter>

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>


        <!-- ðŸ”— Required so Health Connect can link to your privacy policy -->
        <activity-alias
            android:name="ViewPermissionUsageActivity"
            android:exported="true"
            android:targetActivity=".MainActivity"
            android:permission="android.permission.START_VIEW_PERMISSION_USAGE">
            <intent-filter>
                <action android:name="android.intent.action.VIEW_PERMISSION_USAGE" />
                <category android:name="android.intent.category.HEALTH_PERMISSIONS" />
            </intent-filter>
        </activity-alias>
        <meta-data
            android:name="flutterEmbedding"
            android:value="2" />
    </application>


    <!-- ðŸ§­ Allows checking whether Health Connect is installed -->
    <queries>
        <package android:name="com.google.android.apps.healthdata" />
        <intent>
            <action android:name="androidx.health.ACTION_SHOW_PERMISSIONS_RATIONALE" />
        </intent>
    </queries>
</manifest>